<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="bounds.js"></script>
    <title>Transformations Test</title>
</head>
<body>
    <canvas id="screen" width="1000" height="500" style="border:1px solid black;"></canvas>
    <script>
        var canvas = document.getElementById("screen");
        var c = canvas.getContext("2d")

        function drawPath(c, points) {
            c.save();
            c.fillStyle = "red";
            c.strokeStyle = "black";
            c.lineWidth = 2;

            c.beginPath();
            c.moveTo(points[0][0], points[0][1]);
            for (let i = 0; i < points.length; i++) {
                const element = points[i];
                c.lineTo(element[0], element[1])
                c.moveTo(element[0], element[1])
            }
            
            c.lineTo(points[0][0], points[0][1]);
            c.closePath();
            c.stroke();
            c.restore();
        }

        function magic(c,b) {
            
            w = c.canvas.width;
            h = c.canvas.height;

            c.scale(1,-1);
            c.translate(1,-h);
            
            var r = Math.min(w/b.xLength, h/b.yLength);
            c.scale(r,r);
            c.translate(-b.xCenter, -b.yCenter);
            c.translate(w/(2*r),h/(2*r));
            //c.rotate(Math.PI);
        }

        function drawHelp(c,b)
        {
            c.save();
            c.fillStyle = "#FF0000";
            c.strokeStyle = "#FFAAAA";

            c.beginPath()
            c.moveTo(b.xMin, b.yCenter);
            c.lineTo(b.xMax, b.yCenter);
            
            c.moveTo(b.xCenter, b.yMin);
            c.lineTo(b.xCenter, b.yMax);
            c.stroke();
            c.closePath()

            c.fillRect(b.xMin-5, b.yCenter-5,10,10);
            c.fillRect(b.xMax-5, b.yCenter-5,10,10);
            c.fillRect(b.xCenter-5, b.yMin-5,10,10);
            c.fillRect(b.xCenter-5, b.yMax-5,10,10);


            c.fillRect(b.xCenter-5, b.yCenter-5,10,10);
            
            c.restore();
        }

        triangle = [[0,0], [40,0], [20,20]];
        rand = [[0,0], [100,200], [500,450],[450,500],[400,400]]
        rect = [[100,100], [150,50],[200,100], [200,200],[100,200]]
        current = rect

        b = new Bounds();
        
        for (let i = 0; i < current.length; i++) {
            const e = current[i];
            b.process(e[0],e[1]);
        }

        console.log(b.toString());


        magic(c,b);
        drawPath(c,current);
        drawHelp(c,b);
    </script>
</body>
</html>